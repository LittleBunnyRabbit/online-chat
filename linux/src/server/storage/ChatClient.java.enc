aW1wb3J0IGphdmEuaW8uKjsKaW1wb3J0IGphdmEubmV0Lio7CmltcG9ydCBqYXZhLnV0aWwuKjsK
CnB1YmxpYyBjbGFzcyBDaGF0Q2xpZW50IGV4dGVuZHMgVGhyZWFkCnsKCXByb3RlY3RlZCBpbnQg
c2VydmVyUG9ydCA9IDEyMzQ7Cglwcm90ZWN0ZWQgc3RhdGljIFN0cmluZyBjbGllbnROYW1lOwoK
CXB1YmxpYyBzdGF0aWMgdm9pZCBtYWluKFN0cmluZ1tdIGFyZ3MpIHRocm93cyBFeGNlcHRpb24g
ewoJCVNjYW5uZXIgc2MgPSBuZXcgU2Nhbm5lcihTeXN0ZW0uaW4pOwoJCVN5c3RlbS5vdXQucHJp
bnQoIkVudGVyIHVzZXJuYW1lOiAiKTsKCQljbGllbnROYW1lID0gc2MubmV4dCgpOwoJCW5ldyBD
aGF0Q2xpZW50KCk7Cgl9CgoJcHVibGljIENoYXRDbGllbnQoKSB0aHJvd3MgRXhjZXB0aW9uIHsK
CQlTb2NrZXQgc29ja2V0ID0gbnVsbDsKCQlEYXRhSW5wdXRTdHJlYW0gaW4gPSBudWxsOwoJCURh
dGFPdXRwdXRTdHJlYW0gb3V0ID0gbnVsbDsKCgkJLy8gY29ubmVjdCB0byB0aGUgY2hhdCBzZXJ2
ZXIKCQl0cnkgewoJCQlTeXN0ZW0ub3V0LnByaW50bG4oIltzeXN0ZW1dIGNvbm5lY3RpbmcgdG8g
Y2hhdCBzZXJ2ZXIgLi4uIik7CgkJCXNvY2tldCA9IG5ldyBTb2NrZXQoImxvY2FsaG9zdCIsIHNl
cnZlclBvcnQpOyAvLyBjcmVhdGUgc29ja2V0IGNvbm5lY3Rpb24KCQkJaW4gPSBuZXcgRGF0YUlu
cHV0U3RyZWFtKHNvY2tldC5nZXRJbnB1dFN0cmVhbSgpKTsgLy8gY3JlYXRlIGlucHV0IHN0cmVh
bSBmb3IgbGlzdGVuaW5nIGZvciBpbmNvbWluZyBtZXNzYWdlcwoJCQlvdXQgPSBuZXcgRGF0YU91
dHB1dFN0cmVhbShzb2NrZXQuZ2V0T3V0cHV0U3RyZWFtKCkpOyAvLyBjcmVhdGUgb3V0cHV0IHN0
cmVhbSBmb3Igc2VuZGluZyBtZXNzYWdlcwoJCQlTeXN0ZW0ub3V0LnByaW50bG4oIltzeXN0ZW1d
IGNvbm5lY3RlZCIpOwoKCQkJQ2hhdENsaWVudE1lc3NhZ2VSZWNlaXZlciBtZXNzYWdlX3JlY2Vp
dmVyID0gbmV3IENoYXRDbGllbnRNZXNzYWdlUmVjZWl2ZXIoaW4pOyAvLyBjcmVhdGUgYSBzZXBh
cmF0ZSB0aHJlYWQgZm9yIGxpc3RlbmluZyB0byBtZXNzYWdlcyBmcm9tIHRoZSBjaGF0IHNlcnZl
cgoJCQltZXNzYWdlX3JlY2VpdmVyLnN0YXJ0KCk7IC8vIHJ1biB0aGUgbmV3IHRocmVhZAoJCX0g
Y2F0Y2ggKEV4Y2VwdGlvbiBlKSB7CgkJCWUucHJpbnRTdGFja1RyYWNlKFN5c3RlbS5lcnIpOwoJ
CQlTeXN0ZW0uZXhpdCgxKTsKCQl9CgoJCS8vIHNlbmQgdXNlcm5hbWUKCQlzZW5kTWVzc2FnZShj
bGllbnROYW1lLCBvdXQpOwoKCgkJLy8gcmVhZCBmcm9tIFNURElOIGFuZCBzZW5kIG1lc3NhZ2Vz
IHRvIHRoZSBjaGF0IHNlcnZlcgoJCUJ1ZmZlcmVkUmVhZGVyIHN0ZF9pbiA9IG5ldyBCdWZmZXJl
ZFJlYWRlcihuZXcgSW5wdXRTdHJlYW1SZWFkZXIoU3lzdGVtLmluKSk7CgkJU3RyaW5nIHVzZXJJ
bnB1dDsKCQl3aGlsZSAoKHVzZXJJbnB1dCA9IHN0ZF9pbi5yZWFkTGluZSgpKSAhPSBudWxsKSB7
IC8vIHJlYWQgYSBsaW5lIGZyb20gdGhlIGNvbnNvbGUKCQkJdGhpcy5zZW5kTWVzc2FnZSh1c2Vy
SW5wdXQsIG91dCk7IC8vIHNlbmQgdGhlIG1lc3NhZ2UgdG8gdGhlIGNoYXQgc2VydmVyCgkJfQoK
CQkvLyBjbGVhbnVwCgkJb3V0LmNsb3NlKCk7CgkJaW4uY2xvc2UoKTsKCQlzdGRfaW4uY2xvc2Uo
KTsKCQlzb2NrZXQuY2xvc2UoKTsKCX0KCglwcml2YXRlIHZvaWQgc2VuZE1lc3NhZ2UoU3RyaW5n
IG1lc3NhZ2UsIERhdGFPdXRwdXRTdHJlYW0gb3V0KSB7CgkJdHJ5IHsKCQkJb3V0LndyaXRlVVRG
KG1lc3NhZ2UpOyAvLyBzZW5kIHRoZSBtZXNzYWdlIHRvIHRoZSBjaGF0IHNlcnZlcgoJCQlvdXQu
Zmx1c2goKTsgLy8gZW5zdXJlIHRoZSBtZXNzYWdlIGhhcyBiZWVuIHNlbnQKCQl9IGNhdGNoIChJ
T0V4Y2VwdGlvbiBlKSB7CgkJCVN5c3RlbS5lcnIucHJpbnRsbigiW3N5c3RlbV0gY291bGQgbm90
IHNlbmQgbWVzc2FnZSIpOwoJCQllLnByaW50U3RhY2tUcmFjZShTeXN0ZW0uZXJyKTsKCQl9Cgl9
Cn0KCi8vIHdhaXQgZm9yIG1lc3NhZ2VzIGZyb20gdGhlIGNoYXQgc2VydmVyIGFuZCBwcmludCB0
aGUgb3V0CmNsYXNzIENoYXRDbGllbnRNZXNzYWdlUmVjZWl2ZXIgZXh0ZW5kcyBUaHJlYWQgewoJ
cHJpdmF0ZSBEYXRhSW5wdXRTdHJlYW0gaW47CgoJcHVibGljIENoYXRDbGllbnRNZXNzYWdlUmVj
ZWl2ZXIoRGF0YUlucHV0U3RyZWFtIGluKSB7CgkJdGhpcy5pbiA9IGluOwoJfQoKCXB1YmxpYyB2
b2lkIHJ1bigpIHsKCQl0cnkgewoJCQlTdHJpbmcgbWVzc2FnZTsKCQkJd2hpbGUgKChtZXNzYWdl
ID0gdGhpcy5pbi5yZWFkVVRGKCkpICE9IG51bGwpIHsgLy8gcmVhZCBuZXcgbWVzc2FnZQoJCQkJ
U3lzdGVtLm91dC5wcmludGxuKCJbUktjaGF0XSAiICsgbWVzc2FnZSk7IC8vIHByaW50IHRoZSBt
ZXNzYWdlIHRvIHRoZSBjb25zb2xlCgkJCX0KCQl9IGNhdGNoIChFeGNlcHRpb24gZSkgewoJCQlT
eXN0ZW0uZXJyLnByaW50bG4oIltzeXN0ZW1dIGNvdWxkIG5vdCByZWFkIG1lc3NhZ2UiKTsKCQkJ
ZS5wcmludFN0YWNrVHJhY2UoU3lzdGVtLmVycik7CgkJCVN5c3RlbS5leGl0KDEpOwoJCX0KCX0K
fQo=
